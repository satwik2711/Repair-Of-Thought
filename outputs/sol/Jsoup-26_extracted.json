{
  "Jsoup-26": {
    "The root cause of the bug is that the `copySafeNodes` method is trying to access the `childNodes` of the `body` element of the `dirtyDocument`, but the `body` element is null. This is because the `dirtyDocument` contains a `frameset` element, which does not have a `body` element. The `copySafeNodes` method is not handling this case correctly.": [
      "Check for Frameset Element\nCheck if the `dirtyDocument` contains a `frameset` element before trying to access its `body` element. If it does, return an empty document. This can be achieved by adding a simple null check for the `body` element before calling the `copySafeNodes` method.\n\n```java\npublic Document clean(Document dirtyDocument) {\n    Validate.notNull(dirtyDocument);\n\n    if (dirtyDocument.body() == null) {\n        return Document.createShell(dirtyDocument.baseUri());\n    }\n\n    Document clean = Document.createShell(dirtyDocument.baseUri());\n    copySafeNodes(dirtyDocument.body(), clean.body());\n\n    return clean;\n}\n```",
      "Handle Frameset Element\nModify the `copySafeNodes` method to handle the case where the `source` element is a `frameset` element. This could involve recursively calling the method on the `frameset` element's children. However, this approach may require significant changes to the `copySafeNodes` method and may not be feasible without modifying other parts of the code.\n\n```java\nprivate void copySafeNodes(Node source, Node dest) {\n    if (source instanceof FrameSet) {\n        for (Node child : source.childNodes()) {\n            copySafeNodes(child, dest);\n        }\n    } else {\n        // existing implementation\n    }\n}\n```",
      "Return an Empty Document with a Frameset Element\nIf the `dirtyDocument` contains a `frameset` element, return an empty document with a `frameset` element instead of throwing an exception. This would ensure that the function returns a valid document, even if it's empty.\n\n```java\npublic Document clean(Document dirtyDocument) {\n    Validate.notNull(dirtyDocument);\n\n    if (dirtyDocument.body() == null) {\n        Document clean = Document.createShell(dirtyDocument.baseUri());\n        clean.body().appendChild(new FrameSet());\n        return clean;\n    }\n\n    Document clean = Document.createShell(dirtyDocument.baseUri());\n    copySafeNodes(dirtyDocument.body(), clean.body());\n\n    return clean;\n}\n```"
    ]
  }
}